<!DOCTYPE html>

<html lang="en">

<head>
    <meta name="viewport" content="width=device-width, initial-scale=1">
    <meta charset="UTF-8">

    <title>SMART BUS</title>
    <!-- Latest compiled and minified CSS -->
    <!-- Optional theme -->
    <link rel="stylesheet" href="/stylesheets/bootstrap-theme.min.css">
    <!--custom.css-->
    <link rel="stylesheet" href="/stylesheets/index.css">
    <!--index.css-->
    <script src="https://code.jquery.com/jquery-2.2.0.min.js"></script>
</head>

<body>
    <div class="row">
        <div class="col-xs-12 col-md-12 col-lg-12" id="container">
            <div class="panel panel-primary">
              <div class="panel-heading">
                  <center>SMART BUS STATUS</center>
              </div>
                <div class="panel-body">
                    <!-- first line of container -->
                    <div class="row">
                        <div class="col-xs-6 col-md-6 col-lg-6">
                            <div id="date-div" class="well well-sm">
                                <center></center>
                            </div>
                        </div>
                        <div class="col-xs-4 col-md-4 col-lg-4">
                            <div id="time-div" class="well well-sm">
                                <center></center>
                            </div>
                        </div>
                        <div class="col-xs-2 col-md-2 col-lg-2">
                            <div id="temp-div" class="well well-sm">
                                <center>TEMP</center>
                            </div>
                        </div>
                    </div>
                    <!-- second line of container -->
                    <div class="row">
                        <div class="col-xs-8 col-md-8 col-lg-8">
                            <div id="total-div" class="well well-lg">
                                <center>TOTAL</center>
                            </div>
                        </div>
                        <div class="col-xs-4 col-md-4 col-lg-4">
                            <div id="reserve-div" class="well well-lg">
                                <center>RESERVE</center>
                            </div>
                        </div>
                    </div>
                    <!-- third line of container -->
                    <div class="row">
                        <div class="col-xs-6 col-md-6 col-lg-6">
                            <div id="enter-div" class="well well-lg">
                                <center>ENTER</center>
                            </div>
                        </div>

                        <div class="col-xs-6 col-md-6 col-lg-6">
                            <div id="leave-div" class="well well-lg">
                                <center>LEAVE</center>
                            </div>
                        </div>
                    </div>
                    <!-- third line of container -->
                    <div class="row">
                        <div class="col-xs-12 col-md-12 col-lg-12">
                            <div class="input-group">
                                <input id="customerName-input" type="text" class="form-control" aria-label="...">
                                <div class="input-group-btn ">
                                    <button disabled id="reserve-btn" class="btn btn-info" type="button ">RESERVE!</button>
                                    <button disabled id="cancel-btn" class="btn btn-warning" type="button ">CANCEL!</button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
        </div>
    </div>
    </div>
    <script type="text/javascript">
    var time = $('#time-div');
    var datetxt = $('#date-div')
    var numEnter = 0;
    var numLeave = 0;
    var numSeat = 20;
    var numTemperature = 25;
    var temperature = $('#temp-div');
    var enter = $('#enter-div');
    var leave = $('#leave-div');
    var numReserve = 0;
    var reserveList = [1];
    var reserveBtn = $('#reserveBtn');
    var inputName = $('#inputName');

    setInterval(function () {
      var date = new Date();
      time.html(date.getHours() + ":" + date.getMinutes() + ":" + date.getSeconds());
      datetxt.html((date.getMonth() + 1) + "/" + date.getDate() + "/" + date.getFullYear());
    }, 1000);

    setInterval(function () {
      $.ajax( {
        url: 'http://10.32.176.4/Exponential'
      })
      .done(function(data) {
        temperature.html();
      });
    },10000);

    var enterF = function() {
      numEnter += 1;
      numSeat = 20 - numEnter + numLeave;
      enter.html(numEnter);
      seat.html(numSeat);
    }

    var leaveF = function() {
      numLeaave += 1;
      numSeat = 20 - numEnter + numLeave;
      leave.html(numLeaave);
      seat.html(numSeat);
    }

    var reserveF = function(name) {
      reserveList[numReserve] = name;
      numReserve += 1;
      numSeat -= 1;
    }

    var cancelF = function(index) {
      reserveList[index] = "";
      numReserve -= 1;
      numSeat += 1;
    }

    reserveBtn.click(function() {
      if (numSeat !== 0) {
          var name = inputName.val();
          reserveF(name);
      } else {
          alert("no seat left");
      }
    });
    </script>
</body>

</html>
